<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/economy - Space Station Effigy</title></head><body><header><a href="index.html">Space Station Effigy</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/economy.html#var">Var Details</a> - <a href="datum/controller/subsystem/economy.html#proc">Proc Details</a></header><main><h1>economy <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/economy.html">economy</a></aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L1"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/audit_log">audit_log</a></th><td>A list of strings containing a basic transaction history of purchases on the station.
Added to any time when player accounts purchase something.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/bank_accounts_by_id">bank_accounts_by_id</a></th><td>List of normal (no department ones) accounts' identifiers with associated datum accounts, for big O performance.
A list of sole account datums can be obtained with flatten_list(), another variable would be redundant rn.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/bank_accounts_by_job">bank_accounts_by_job</a></th><td>A list of bank accounts indexed by their assigned job typepath.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/bounty_modifier">bounty_modifier</a></th><td>The modifier multiplied to the value of bounties paid out.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/cached_processing">cached_processing</a></th><td>List used to track partially completed processing steps
Allows for proper yielding</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/civ_bounty_tracker">civ_bounty_tracker</a></th><td>How many civilain bounties have been completed so far this shift? Affects civilian budget payout values.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/dep_cards">dep_cards</a></th><td>List of the departmental budget cards in existance.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/earning_report">earning_report</a></th><td>Contains the message to send to newscasters about price inflation and earnings, updated on price_update()</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/full_ancap">full_ancap</a></th><td>Enables extra money charges for things that normally would be free, such as sleepers/cryo/beepsky.
Take care when enabling, as players will NOT respond well if the economy is set up for low cash flows.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/inflation_value">inflation_value</a></th><td>A var that displays the result of inflation_value for easier debugging and tracking.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/mail_blocked">mail_blocked</a></th><td>Mail Holiday: AKA does mail arrive today? Always blocked on Sundays.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/mail_waiting">mail_waiting</a></th><td>Number of mail items generated.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/pack_price_modifier">pack_price_modifier</a></th><td>The modifier multiplied to the value of cargo pack prices.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/processing_part">processing_part</a></th><td>Tracks what bit of processing we're on, so we can resume post yield in the right place</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/station_target">station_target</a></th><td>A var that tracks how much money is expected to be on station at a given time. If less than station_total prices go up in vendors.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/station_target_buffer">station_target_buffer</a></th><td>A passively increasing buffer to help alliviate inflation later into the shift, but to a lesser degree.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/station_total">station_total</a></th><td>A var that collects the total amount of credits owned in player accounts on station, reset and recounted on fire()</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/techweb_bounty">techweb_bounty</a></th><td>Departmental cash provided to science when a node is researched in specific configs.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#var/temporary_total">temporary_total</a></th><td>Tracks a temporary sum of all money in the system
We need this on the subsystem because of yielding and such</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/economy.html#proc/departmental_payouts">departmental_payouts</a></th><td>Departmental income payments are kept static and linear for every department, and paid out once every 5 minutes, as determined by MAX_GRANT_DPT.
Iterates over every department account for the same payment.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#proc/get_dep_account">get_dep_account</a></th><td>Handy proc for obtaining a department's bank account, given the department ID, AKA the define assigned for what department they're under.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#proc/inflation_value">inflation_value</a></th><td>Proc that returns a value meant to shift inflation values in vendors, based on how much money exists on the station.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#proc/issue_paydays">issue_paydays</a></th><td>Issues all our bank-accounts paydays, and gets an idea of how much money is in circulation</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#proc/price_update">price_update</a></th><td>Updates the the inflation_value, effecting newscaster alerts and the mail system.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#proc/track_purchase">track_purchase</a></th><td>Proc that adds a set of strings and ints to the audit log, tracked by the economy SS.</td></tr><tr><th><a href="datum/controller/subsystem/economy.html#proc/update_vending_prices">update_vending_prices</a></th><td>Iterates over the machines list for vending machines, resets their regular and premium product prices (Not contraband), and sends a message to the newscaster network.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/audit_log"><aside class="declaration">var </aside>audit_log <aside>– /list</aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L55"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 55"></a></h3><p>A list of strings containing a basic transaction history of purchases on the station.
Added to any time when player accounts purchase something.</p><h3 id="var/bank_accounts_by_id"><aside class="declaration">var </aside>bank_accounts_by_id <aside>– /list</aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L30"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 30"></a></h3><p>List of normal (no department ones) accounts' identifiers with associated datum accounts, for big O performance.
A list of sole account datums can be obtained with flatten_list(), another variable would be redundant rn.</p><h3 id="var/bank_accounts_by_job"><aside class="declaration">var </aside>bank_accounts_by_job <aside>– /list</aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L32"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 32"></a></h3><p>A list of bank accounts indexed by their assigned job typepath.</p><h3 id="var/bounty_modifier"><aside class="declaration">var </aside>bounty_modifier <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L48"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 48"></a></h3><p>The modifier multiplied to the value of bounties paid out.</p><h3 id="var/cached_processing"><aside class="declaration">var </aside>cached_processing <aside>– /list</aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L63"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 63"></a></h3><p>List used to track partially completed processing steps
Allows for proper yielding</p><h3 id="var/civ_bounty_tracker"><aside class="declaration">var </aside>civ_bounty_tracker <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L44"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 44"></a></h3><p>How many civilain bounties have been completed so far this shift? Affects civilian budget payout values.</p><h3 id="var/dep_cards"><aside class="declaration">var </aside>dep_cards <aside>– /list</aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L34"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 34"></a></h3><p>List of the departmental budget cards in existance.</p><h3 id="var/earning_report"><aside class="declaration">var </aside>earning_report <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L46"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 46"></a></h3><p>Contains the message to send to newscasters about price inflation and earnings, updated on price_update()</p><h3 id="var/full_ancap"><aside class="declaration">var </aside>full_ancap <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L22"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 22"></a></h3><p>Enables extra money charges for things that normally would be free, such as sleepers/cryo/beepsky.
Take care when enabling, as players will NOT respond well if the economy is set up for low cash flows.</p><h3 id="var/inflation_value"><aside class="declaration">var </aside>inflation_value <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L42"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 42"></a></h3><p>A var that displays the result of inflation_value for easier debugging and tracking.</p><h3 id="var/mail_blocked"><aside class="declaration">var </aside>mail_blocked <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L60"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 60"></a></h3><p>Mail Holiday: AKA does mail arrive today? Always blocked on Sundays.</p><h3 id="var/mail_waiting"><aside class="declaration">var </aside>mail_waiting <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L58"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 58"></a></h3><p>Number of mail items generated.</p><h3 id="var/pack_price_modifier"><aside class="declaration">var </aside>pack_price_modifier <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L50"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 50"></a></h3><p>The modifier multiplied to the value of cargo pack prices.</p><h3 id="var/processing_part"><aside class="declaration">var </aside>processing_part <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L65"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 65"></a></h3><p>Tracks what bit of processing we're on, so we can resume post yield in the right place</p><h3 id="var/station_target"><aside class="declaration">var </aside>station_target <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L38"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 38"></a></h3><p>A var that tracks how much money is expected to be on station at a given time. If less than station_total prices go up in vendors.</p><h3 id="var/station_target_buffer"><aside class="declaration">var </aside>station_target_buffer <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L40"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 40"></a></h3><p>A passively increasing buffer to help alliviate inflation later into the shift, but to a lesser degree.</p><h3 id="var/station_total"><aside class="declaration">var </aside>station_total <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L36"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 36"></a></h3><p>A var that collects the total amount of credits owned in player accounts on station, reset and recounted on fire()</p><h3 id="var/techweb_bounty"><aside class="declaration">var </aside>techweb_bounty <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L25"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 25"></a></h3><p>Departmental cash provided to science when a node is researched in specific configs.</p><h3 id="var/temporary_total"><aside class="declaration">var </aside>temporary_total <aside>– </aside> <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L68"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 68"></a></h3><p>Tracks a temporary sum of all money in the system
We need this on the subsystem because of yielding and such</p><h2 id="proc">Proc Details</h2><h3 id="proc/departmental_payouts"><aside class="declaration">proc </aside>departmental_payouts<aside>()  <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L137"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 137"></a></aside></h3><p>Departmental income payments are kept static and linear for every department, and paid out once every 5 minutes, as determined by MAX_GRANT_DPT.
Iterates over every department account for the same payment.</p><h3 id="proc/get_dep_account"><aside class="declaration">proc </aside>get_dep_account<aside>(dep_id)  <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L128"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 128"></a></aside></h3><p>Handy proc for obtaining a department's bank account, given the department ID, AKA the define assigned for what department they're under.</p><h3 id="proc/inflation_value"><aside class="declaration">proc </aside>inflation_value<aside>()  <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L186"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 186"></a></aside></h3><p>Proc that returns a value meant to shift inflation values in vendors, based on how much money exists on the station.</p>
<p>If crew are somehow aquiring far too much money, this value will dynamically cause vendables across the station to skyrocket in price until some money is spent.
Additionally, civilain bounties will cost less, and cargo goodies will increase in price as well.
The goal here is that if you want to spend money, you'll have to get it, and the most efficient method is typically from other players.</p><h3 id="proc/issue_paydays"><aside class="declaration">proc </aside>issue_paydays<aside>()  <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L153"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 153"></a></aside></h3><p>Issues all our bank-accounts paydays, and gets an idea of how much money is in circulation</p><h3 id="proc/price_update"><aside class="declaration">proc </aside>price_update<aside>()  <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L169"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 169"></a></aside></h3><p>Updates the the inflation_value, effecting newscaster alerts and the mail system.</p><h3 id="proc/track_purchase"><aside class="declaration">proc </aside>track_purchase<aside>(/<a href="datum.html">datum</a>/<a href="datum/bank_account.html">bank_account</a>/account, price_to_use, vendor)  <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L201"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 201"></a></aside></h3><p>Proc that adds a set of strings and ints to the audit log, tracked by the economy SS.</p>
<ul>
<li>account: The bank account of the person purchasing the item.</li>
<li>price_to_use: The cost of the purchase made for this transaction.</li>
<li>vendor: The object or structure medium that is charging the user. For Vending machines that's the machine, for payment component that's the parent, cargo that's the crate, etc.</li>
</ul><h3 id="proc/update_vending_prices"><aside class="declaration">proc </aside>update_vending_prices<aside>()  <a href="https://github.com/effigy-se/effigy-se/blob/586e67d6571ee660ffd44ee9e26003b31ca25573/code/controllers/subsystem/economy.dm#L214"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/economy.dm 214"></a></aside></h3><p>Iterates over the machines list for vending machines, resets their regular and premium product prices (Not contraband), and sends a message to the newscaster network.</p></main><footer>tgstation.dme <a href="https://github.com/effigy-se/effigy-se/tree/586e67d6571ee660ffd44ee9e26003b31ca25573">586e67d</a> (main) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>